<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="msg">
    <select id="history" parameterType="pd" resultType="pd">
        select * from message_log
        <where>
            (sender=#{sender} and receiver=#{receiver} and type=0)
            or (sender=#{receiver} and receiver=#{sender} and type=0)
        </where>
        ORDER BY time 
    </select>
    <update id="update_statue">
        update message_log
        <set>
            statue=1
        </set>
        where sender=#{sender}
    </update>
    <select id="msgpush" parameterType="pd" resultType="pd">
        select * from message_log
        GROUP BY text_body HAVING type=1
        ORDER BY time 
    </select>
</mapper>